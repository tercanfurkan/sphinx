@(pipeIndex: Form[models.form.PipeIndex], currentSortBy: String, currentOrder: String,
pipeIndexSummary: models.wrapper.PipeIndexSummary.PipeIndexSummaryUI, 
diameterArray: List[Long], groundWaterArray: List[Long], areaArray: List[Long], 
roadclassArray: List[Long], beachArray: List[Long], blockageArray: List[Long],
flushingEventArray: List[Long], extraWaterArray: List[Long], cctvDefectsArray: List[Long],
cctvMajorDefectsArray: List[Long], annualOverFlowArray: List[Long])

@import helper._

@implicitFieldConstructor = @{ FieldConstructor(twitterBootstrapInput.render) } 

@****************************************
* Helper generating navigation links    *
****************************************@
@link(newPage:Int, newSortBy:String) = @{
    
    var sortBy = currentSortBy
    var order = currentOrder
    
    if(newSortBy != null) {
        sortBy = newSortBy
        if(currentSortBy == newSortBy) {
            if(currentOrder == "asc") {
                order = "desc"
            } else {
                order = "asc"
            }
        } else {
            order = "asc"
        }
    }
    
    // Generate the link
    routes.Application.pipeIndex(newPage, sortBy, order)
    
}

@**********************************
* Helper generating table headers *
***********************************@
@header(key:String, title:String) = {
    <th class="@key.replace(".","_") header @if(currentSortBy == key) @{if(currentOrder == "asc") "headerSortDown" else "headerSortUp"}">
        <a href="@link(0, key)">@title</a>
    </th>
}

@main {



<div class="adjustmentRow" class="row">
	<h1 id="homeTitle">@Messages("pi.pipe.title")</h1>
</div>

<div class="accordion" id="accordion2">
	<form class="form-horizontal" action="@routes.Application.pipeIndex(0)" method="GET">
		<div class="accordion-group">
			<div class="accordion-heading">
				<a class="accordion-toggle" data-toggle="collapse"
					data-parent="#accordion2" href="#collapseOne"></a>
			</div>
			<div id="collapseOne" class="accordion-body collapse in">
				<div class="accordion-inner">
					<div class="controls span6" id="sensitivity-div">
						<div class="control-group">
							<label class="control-label bold-label">CONSEQUENCE INDEX</label>
						</div>
						<div class="control-group">
							<label class="control-label bold-label">Set limit values for consequence meters</label>
						</div>
						<div class="control-group">
							<label class="control-label" for="lWasteWater">Color explanations: </label>						
							<div class="controls">
								<table class="table table-bordered">
									<tbody>
										<tr> 
											<td class="controls span1 green">
												<label class="radio inline middle">
												  <span> least significant </span>
												</label>
											</td>
											<td class="controls span1 yellow">
												<label class="radio inline">
												  <span> average </span>
												</label>
											</td>
											<td class="controls span1 red">
												<label class="radio inline">
												  <span> significant </span>
												</label>
											</td>
										</tr>
									</tbody>
								</table>				
							</div>
						</div>							
						<div class="control-group">
							<label class="control-label" for="lWasteWater">Pipe diameter (mm)</label>
							<div class="controls">
								<div class="chartsdiameter" id="chartdiameter"></div>
								<button class="info" id="info1" type="button">Show</button>
								<span class="amount"></span>
								<div class="slider range-slide">
									<div class="slide" value="333,686" min="25" max="1000">
										<span id="min">min:25</span>
								    	<span id="max">max:1000</span>
								    </div>
								</div>
								<span class="help-inline">pipe diameter caution limit</span>	
							</div>
						</div>
						<div class="control-group">
							<label class="control-label" for="lWasteWater">Ground water area (0..3)</label>						
							<div class="controls">
								<div class="chartsgroundwaterarea" id="chartgroundwaterarea"></div>
								<button class="info" id="info4" type="button">Show</button>							
								<span>Ground Water Array: @groundWaterArray</span>
								<table class="table table-bordered">
									<tbody>
										<tr> 
											<td class="controls span1 green">
												<label class="radio inline">
												  <input type="radio" name="optionsRadios" class="middle" id="inlineCheckbox1" value="option1">
												</label>
											</td>											
											<td class="controls span1 yellow">
												<label class="radio inline">
												  <input type="radio" name="optionsRadios" id="inlineCheckbox2" value="option2">
												</label>
											</td>
											<td class="controls span1 red">
												<label class="radio inline">
												  <input type="radio" name="optionsRadios" id="inlineCheckbox3" value="option3">
												</label>
											</td>
										</tr>
									</tbody>
								</table>				
							</div>
						</div>						
						<!--<div class="control-group">
							<label class="control-label" for="lGroundWater">Ground water area (0..3)</label>						
							<div class="controls">
								<span class="amount"></span>
								<div class="slider range-slide">	
									<div class="slide" value="1,2" min="0" max="3">
										<span id="min">min:0</span>
								    	<span id="max">max:3</span>								    
									</div>
								</div>								
								<span class="help-inline">0: not significant to 3: highly significant</span>
							</div>
						</div>-->
						<div class="control-group">
							<label class="control-label" for="lWasteWater">Show/Hide Sewers</label>
							<div class="controls">
								<button class="info" id="info0" type="button">Show</button>
							</div>
						</div>
						<div class="sewer-group">
							<div class="control-group">
								<label class="control-label" for="lWasteWater">Lateral gravity sewers</label>						
								<div class="controls">
									<table class="table table-bordered">
										<tbody>
											<tr> 
												<td class="controls span1 green">
													<label class="radio inline middle">
													  <input type="radio" name="optionsRadios" class="middle" id="inlineCheckbox1" value="option1">
													</label>
												</td>
												<td class="controls span1 yellow">
													<label class="radio inline">
													  <input type="radio" name="optionsRadios" id="inlineCheckbox2" value="option2">
													</label>
												</td>
												<td class="controls span1 red">
													<label class="radio inline">
													  <input type="radio" name="optionsRadios" id="inlineCheckbox3" value="option2">
													</label>
												</td>
											</tr>
										</tbody>
									</table>				
								</div>
							</div>
							<div class="control-group">
								<label class="control-label" for="lWasteWater">Collection sewers</label>						
								<div class="controls">
									<table class="table table-bordered">
										<tbody>
											<tr> 
												<td class="controls span1 green">
													<label class="radio inline middle">
													  <input type="radio" name="optionsRadios" class="middle" id="inlineCheckbox1" value="option1">
													</label>
												</td>
												<td class="controls span1 yellow">
													<label class="radio inline">
													  <input type="radio" name="optionsRadios" id="inlineCheckbox2" value="option2">
													</label>
												</td>
												<td class="controls span1 red">
													<label class="radio inline">
													  <input type="radio" name="optionsRadios" id="inlineCheckbox3" value="option2">
													</label>
												</td>
											</tr>
										</tbody>
									</table>				
								</div>
							</div>
							<div class="control-group">
								<label class="control-label" for="lWasteWater">Gravity sewer mains</label>						
								<div class="controls">
									<table class="table table-bordered">
										<tbody>
											<tr> 
												<td class="controls span1 green">
													<label class="radio inline middle">
													  <input type="radio" name="optionsRadios" class="middle" id="inlineCheckbox1" value="option1">
													</label>
												</td>
												<td class="controls span1 yellow">
													<label class="radio inline">
													  <input type="radio" name="optionsRadios" id="inlineCheckbox2" value="option2">
													</label>
												</td>
												<td class="controls span1 red">
													<label class="radio inline">
													  <input type="radio" name="optionsRadios" id="inlineCheckbox3" value="option2">
													</label>
												</td>
											</tr>
										</tbody>
									</table>				
								</div>
							</div>
							<div class="control-group">
								<label class="control-label" for="lWasteWater">Pressure sewers</label>						
								<div class="controls">
									<table class="table table-bordered">
										<tbody>
											<tr> 
												<td class="controls span1 green">
													<label class="radio inline middle">
													  <input type="radio" name="optionsRadios" class="middle" id="inlineCheckbox1" value="option1">
													</label>
												</td>
												<td class="controls span1 yellow">
													<label class="radio inline">
													  <input type="radio" name="optionsRadios" id="inlineCheckbox2" value="option2">
													</label>
												</td>
												<td class="controls span1 red">
													<label class="radio inline">
													  <input type="radio" name="optionsRadios" id="inlineCheckbox3" value="option2">
													</label>
												</td>
											</tr>
										</tbody>
									</table>				
								</div>
							</div>
							<div class="control-group">
								<label class="control-label" for="lWasteWater">Small pressure sewers</label>						
								<div class="controls">
									<table class="table table-bordered">
										<tbody>
											<tr> 
												<td class="controls span1 green">
													<label class="radio inline">
													  <input type="radio" name="optionsRadios" class="middle" id="inlineCheckbox1" value="option1">
													</label>
												</td>
												<td class="controls span1 yellow">
													<label class="radio inline">
													  <input type="radio" name="optionsRadios" id="inlineCheckbox2" value="option2">
													</label>
												</td>
												<td class="controls span1 red">
													<label class="radio inline">
													  <input type="radio" name="optionsRadios" id="inlineCheckbox3" value="option2">
													</label>
												</td>
											</tr>
										</tbody>
									</table>				
								</div>
							</div>
						</div>
						<div class="control-group">
							<label class="control-label" for="lWasteWater">Relative floor area (m<sup>2</sup>/m)</label>											
							<div class="controls">
								<div class="chartsarea" id="chartarea"></div>
								<button class="info" id="info2" type="button">Show</button>							
								<span class="amount"></span>
								<div class="slider range-slide">
									<div class="slide" value="16,33" min="0" max="51">
										<span id="min">min:0</span>
								    	<span id="max">max:50.6</span>								    
									</div>
								</div>							
								<span class="help-inline">floor area m<sup>2</sup>/ length of pipes</span>	
							</div>
						</div>						
						<!--<div class="control-group">
							<label class="control-label" for="lWasteWater">Road classification (1..4)</label>						
							<div class="controls">
								<span class="amount"></span>
								<div class="slider range-slide">	
									<div class="slide" value="1,3" min="4" max="1">
										<span id="min">min:4</span>
								    	<span id="max">max:1</span>								    
									</div>
								</div>								
								<span class="help-inline">1:Regional main street 1, 2:Regional main street 2, 3:Local main street, 4:Collector street</span>	
							</div>
						</div>-->
						<div class="control-group">
							<label class="control-label" for="lWasteWater">Road classification (1..4)</label>						
							<div class="controls">
								<div class="chartsroadclassification" id="chartroadclassification"></div>
								<button class="info" id="info5" type="button">Show</button>								
								<span>RC array: @roadclassArray</span>
								<table class="table table-bordered">
									<tbody>
										<tr> 
											<td class="controls span1 green">
												<label class="radio inline middle">
												  <input type="radio" name="optionsRadios" class="middle" id="inlineCheckbox1" value="option1">
												</label>
											</td>										
											<td class="controls span1 yellow">
												<label class="radio inline">
												  <input type="radio" name="optionsRadios" id="inlineCheckbox3" value="option3">
												</label>
											</td>
											<td class="controls span1 red">
												<label class="radio inline">
												  <input type="radio" name="optionsRadios" id="inlineCheckbox4" value="option4">
												</label>
											</td>
										</tr>
									</tbody>
								</table>				
							</div>
						</div>								
						<div class="control-group">
							<label class="control-label" for="lWasteWater">Beach distance (m)</label>						
							<div class="controls">
								<div class="chartsbeach" id="chartbeach"></div>
								<button class="info" id="info3" type="button">Show</button>
								<span>Beach array: @beachArray</span>								
								<span class="amount"></span>
								<div class="slider range-slide">	
									<div class="slide" value="66,133" min="0" max="200">
										<span id="min">min:</span>
								    	<span id="max">max:200</span>								    
									</div>
								</div>										
								<span class="help-inline">distance between the areal overflow structure and the nearest beach</span>	
							</div>
						</div>

					</div>

					<div class="controls span6">
						
						<div class="control-group">
							<label class="control-label bold-label">CONDITION INDEX</label>
						</div>
						<div class="control-group">
							<label class="control-label bold-label">Set limit values for condition meters</label>
						</div>

						<div class="control-group">
							<label class="control-label" for="lWasteWater">Blockages</label>						
							<div class="controls">
								<div class="chartsblockage" id="chartblockage"></div>
								<button class="info" id="info6" type="button">Show</button>								
								<span>Blockages: @blockageArray</span>								
								<span class="amount"></span>
								<div class="slider range-slide">	
									<div class="slide" value="1,3" min="0" max="4">
										<span id="min">min:0</span>
								    	<span id="max">max:4</span>								    
									</div>
								</div>									
								<span class="help-inline">total number of blockage events of a pipe</span>	
							</div>
						</div>
						<div class="control-group">
							<label class="control-label" for="lWasteWater">Flushing events</label>						
							<div class="controls">
								<div class="chartsflushing" id="chartflushing"></div>
								<button class="info" id="info7" type="button">Show</button>								
								<span>FEA: @flushingEventArray</span>
								<span class="amount"></span>
								<div class="slider range-slide">	
									<div class="slide" value="5,10" min="0" max="17">
										<span id="min">min:0</span>
								    	<span id="max">max:17</span>								    
									</div>
								</div>	
								<span class="help-inline">total number of flushing events of a pipe</span>
							</div>
						</div>
						<div class="control-group">
							<label class="control-label" for="lWasteWater">Extra Water (%)</label>						
							<div class="controls">
								<div class="chartsextrawater" id="chartextrawater"></div>
								<button class="info" id="info8" type="button">Show</button>															
								<span>Extra Water Array: @extraWaterArray</span>
								<span class="amount"></span>
								<div class="slider range-slide">	
									<div class="slide" value="6,12" min="0" max="19">
										<span id="min">min:0</span>
								    	<span id="max">max:18.8</span>								    
									</div>
								</div>	
								<span class="help-inline">wastewater flow / (0.8 x water consumption)</span>
							</div>
						</div>
						<div class="control-group">
							<label class="control-label" for="lWasteWater">CCTV defects</label>						
							<div class="controls">
								<div class="chartsCCTVdefects" id="chartCCTVdefects"></div>
								<button class="info" id="info9" type="button">Show</button>							
								<span>CCTV array: @cctvDefectsArray</span>
								<span class="amount"></span>
								<div class="slider range-slide">	
									<div class="slide" value="11,22" min="0" max="34">
										<span id="min">min:0</span>
								    	<span id="max">max:34</span>								    
									</div>
								</div>	
								<span class="help-inline">sum of all CCTV inspection defects (1 to 4) of a pipe</span>
							</div>
						</div>
						<div class="control-group">
							<label class="control-label" for="lWasteWater">CCTV major defects</label>					
							<div class="controls">
								<div class="chartsCCTVmajordefects" id="chartCCTVmajordefects"></div>
								<button class="info" id="info10" type="button">Show</button							
								<span>CCTV MD array: @cctvMajorDefectsArray</span>
								<span class="amount"></span>
								<div class="slider range-slide">	
									<div class="slide" value="8,17" min="0" max="26">
										<span id="min">min:0</span>
								    	<span id="max">max:26</span>								    
									</div>
								</div>	
								<span class="help-inline">sum of CCTV inspection defects 3 and 4 of a pipe</span>
							</div>
						</div>
						<div class="control-group">
							<label class="control-label" for="lWasteWater">Over flow (m<sup>3</sup>/year)</label>					
							<div class="controls">
								<span>Ovefflow array: @annualOverFlowArray</span>	
								<span class="amount"></span>
								<div class="slider range-slide">	
									<div class="slide" value="33,66" min="0" max="100">
										<span id="min">min:0</span>
								    	<span id="max">max:100</span>								    
									</div>
								</div>	
								<span class="help-inline">annual overflow (m<sup>3</sup>) of the area</span>
							</div>
						</div>

					</div>
				</div>
			</div>
		</div>
		<input type="submit" id="searchsubmit"
			value="Refresh index calculation" class="btn btn-primary">
	</form>

</div>
<h5 id="homeTitle">Index Calculation Summary</h5>
	<table class="table table-bordered table-hover">
		<tbody>
			<tr>
				<td class="controls span4">@Messages("pipeIndex.summary.allIndexPipeLength")</td>
				<td class="controls span2">386.5 km</td>
				<td class="controls span4">@Messages("pipeIndex.summary.conditionAndConsequenceIndexPipeLength")</td>
				<td class="controls span2">@((math rint pipeIndexSummary.conditionAndConsequencePipeLength * 100) / 100) km</td>
			</tr>
			<tr>
				<td class="controls span4">@Messages("pipeIndex.summary.consequenceIndexLimit")</td>
				<td class="controls span2">@pipeIndexSummary.consequenceLimit</td>
				<td class="controls span4">@Messages("pipeIndex.summary.conditionIndexLimit")</td>
				<td class="controls span2">@pipeIndexSummary.conditionLimit / 5.0 (unispected)</td>
			</tr>
			<tr>
				<td class="controls span4">@Messages("pipeIndex.summary.consequenceIndexPipeLength")</td>
				<td class="controls span2">@((math rint pipeIndexSummary.consequenceIndexPipeLength * 10) / 10) km</td>
				<td class="controls span4">@Messages("pipeIndex.summary.conditionIndexPipeLength")</td>
				<td class="controls span2">@((math rint pipeIndexSummary.conditionIndexPipeLength * 10) / 10) km</td>
			</tr>
			<tr>
				<td class="controls span4">@Messages("pipeIndex.summary.consequenceIndexPipeLengthInspected")</td>
				<td class="controls span2">@((math rint pipeIndexSummary.consequenceIndexPipeLengthInspected * 10) / 10) km</td>
				<td class="controls span4">@Messages("pipeIndex.summary.conditionIndexPipeLengthInspected")</td>
				<td class="controls span2">@((math rint pipeIndexSummary.conditionIndexPipeLengthInspected * 10) / 10) km</td>
			</tr>
			<tr>
				<td class="controls span4">@Messages("pipeIndex.summary.consequenceIndexPipeLengthNotInspected")</td>
				<td class="controls span2">@((math rint pipeIndexSummary.consequenceIndexPipeLengthNotInspected * 10) / 10) km</td>
				<td class="controls span4">@Messages("pipeIndex.summary.conditionIndexPipeLengthNotInspected")</td>
				<td class="controls span2">@((math rint pipeIndexSummary.conditionIndexPipeLengthNotInspected * 10) / 10) km</td>
			</tr>
		</tbody>
	</table>
<div class="actions">
	<a href="@routes.Application.sendFile()" class="btn">Export index results</a>
</div>
<!--<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css">-->
<!--<link rel="stylesheet" type="text/css" href="@routes.Assets.at("stylesheets/jquery.aristo.css")">-->
<!--<link rel="stylesheet" type="text/css" media="screen" href="@routes.Assets.at("stylesheets/xcharts.css")">-->
<link rel="stylesheet" type="text/css" media="screen" href="@routes.Assets.at("stylesheets/jquery.jqplot.css")">
<link rel="stylesheet" type="text/css" media="screen" href="@routes.Assets.at("stylesheets/jquery-ui-1.10.3.custom.css")">
<style>
.ui-slider { 
	position: relative;
	text-align: left; 
	//background: #F84831;
	background: #1AF230;
}
.slide-back {
    position:absolute;
    height:100%;
}
a.selected {
  background-color:#1F75CC;
  color:white;
  z-index:100;
}
.slider span { position: absolute; top: -5px}
.ui-slider-range { background: #F2FA0A; }
#idmini { width: 50 px; text-align: center}
#idmaxi { width: 50px; text-align: center}
#min { left: 2px; font-size: 12px; font-weight: bold}
#max { right: 2px; font-size: 12px; font-weight: bold}
#accordion2 {font-weight:bold;}
#homeTitle {font-weight: bold;}
</style>
<!--<script src="http://code.jquery.com/jquery-1.9.1.js"></script>-->
<!--<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>-->
<script src="@routes.Assets.at("javascripts/jquery-1.10.2.js")"></script>
<script src="@routes.Assets.at("javascripts/jquery-ui-1.10.3.custom.js")"></script>
<script src="@routes.Assets.at("javascripts/jquery.jqplot.js")"></script>
<script src="@routes.Assets.at("javascripts/jqplot.barRenderer.js")"></script>
<script src="@routes.Assets.at("javascripts/jqplot.categoryAxisRenderer.js")"></script>
<!--[if IE]><script language="javascript" type="text/javascript" src="excanvas.js"></script><![endif]-->
<!--<script src="@routes.Assets.at("javascripts/jquery.flot.min.js")"></script>-->
<!--<script src="@routes.Assets.at("javascripts/Chart.js")"></script>-->
<!--<script src="@routes.Assets.at("javascripts/d3.v3.js")"></script>-->
<!--<script src="@routes.Assets.at("javascripts/xcharts.js")"></script>-->
<script>
$(document).ready(function(){	
	//
	// Drawing a bar chart
	//
	$.jqplot.config.enablePlugins = true;
	var sdiameter = new Array(); 
	i = 0;
	@for(s <- diameterArray) {
		sdiameter[i] = @s;
		i++;
	}
	var ticksDiameter = [0, 100, 200, 300, 400, 500, 600, 700, 800, 900, 1000];
	diameterObj = {
		// Only animate if we're not using excanvas (not in IE 7 or IE 8)..
		animate: !$.jqplot.use_excanvas,
		seriesDefaults:{
			renderer:$.jqplot.BarRenderer,
			pointLabels: { show: true }
		},
		axes: {
			xaxis: {
				renderer: $.jqplot.CategoryAxisRenderer,
				ticks: ticksDiameter
			}
		},
		highlighter: { show: false }
	}
	plot1 = $.jqplot('chartdiameter', [sdiameter], diameterObj);
	
	// Click event
	//$('#chartdiameter').bind('jqplotDataClick', 
	//	function (ev, seriesIndex, pointIndex, data) {
			//$('#info1').html('series: '+seriesIndex+', point: '+pointIndex+', data: '+data);
	//	}
	//);
	/////////////////////
	
	var sgroundwaterarea = new Array(); 
	i = 0;
	@for(s <- groundWaterArray) {
		sgroundwaterarea[i] = @s;
		i++;
	}
	var ticksGroundWater = [0, 1, 2, 3];
	groundWaterObj = {
		// Only animate if we're not using excanvas (not in IE 7 or IE 8)..
		animate: !$.jqplot.use_excanvas,
		seriesDefaults:{
			renderer:$.jqplot.BarRenderer,
			pointLabels: { show: true }
		},
		axes: {
			xaxis: {
				renderer: $.jqplot.CategoryAxisRenderer,
				ticks: ticksGroundWater
			}
		},
		highlighter: { show: false }
	}
	plot2 = $.jqplot('chartgroundwaterarea', [sgroundwaterarea], groundWaterObj);	
	
	var sarea = new Array(); 
	i = 0;
	@for(s <- areaArray) {
		sarea[i] = @s;
		i++;
	}
	var ticksArea = ["0-10", "10-20", "20-30", "30-40", "40-50"];
	areaObj = {
		// Only animate if we're not using excanvas (not in IE 7 or IE 8)..
		animate: !$.jqplot.use_excanvas,
		seriesDefaults:{
			renderer:$.jqplot.BarRenderer,
			pointLabels: { show: true }
		},
		axes: {
			xaxis: {
				renderer: $.jqplot.CategoryAxisRenderer,
				ticks: ticksArea
			}
		},
		highlighter: { show: false }
	}	
	plot3 = $.jqplot('chartarea', [sarea], areaObj);	

	var sroadclass = new Array();
	i = 0;
	@for(s <- roadclassArray) {
		sroadclass[i] = @s;
		i++;
	}
	var ticksBeach = [1, 2, 3, 4];
	roadclassObj = {
		// Only animate if we're not using excanvas (not in IE 7 or IE 8)..
		animate: !$.jqplot.use_excanvas,
		seriesDefaults:{
			renderer:$.jqplot.BarRenderer,
			pointLabels: { show: true }
		},
		axes: {
			xaxis: {
				renderer: $.jqplot.CategoryAxisRenderer,
				ticks: ticksBeach
			}
		},
		highlighter: { show: false }
	}
	plot5 = $.jqplot('chartroadclassification', [sroadclass], roadclassObj);
	
	var sbeach = new Array();
	i = 0;
	@for(s <- beachArray) {
		sbeach[i] = @s;
		i++;
	}
	var ticksBeach = ["0-100", "100-200", "200-300", "300-400", "400-500"];
	beachObj = {
		// Only animate if we're not using excanvas (not in IE 7 or IE 8)..
		animate: !$.jqplot.use_excanvas,
		seriesDefaults:{
			renderer:$.jqplot.BarRenderer,
			pointLabels: { show: true }
		},
		axes: {
			xaxis: {
				renderer: $.jqplot.CategoryAxisRenderer,
				ticks: ticksBeach
			}
		},
		highlighter: { show: false }
	}
	plot4 = $.jqplot('chartbeach', [sbeach], beachObj);

	var sblockage = new Array();
	i = 0;
	@for(s <- blockageArray) {
		sblockage[i] = @s;
		i++;
	}
	var ticksBlockage = [0, 1, 2, 3, 4];
	blockageObj = {
		// Only animate if we're not using excanvas (not in IE 7 or IE 8)..
		animate: !$.jqplot.use_excanvas,
		seriesDefaults:{
			renderer:$.jqplot.BarRenderer,
			pointLabels: { show: true }
		},
		axes: {
			xaxis: {
				renderer: $.jqplot.CategoryAxisRenderer,
				ticks: ticksBlockage
			}
		},
		highlighter: { show: false }
	}
	plot6 = $.jqplot('chartblockage', [sblockage], blockageObj);

	var sflush = new Array();
	i = 0;
	@for(s <- flushingEventArray) {
		sflush[i] = @s;
		i++;
	}
	var ticksFlush = ["0-3", "4-7", "8-11", "12-15", "16-19"];
	flushingObj = {
		// Only animate if we're not using excanvas (not in IE 7 or IE 8)..
		animate: !$.jqplot.use_excanvas,
		seriesDefaults:{
			renderer:$.jqplot.BarRenderer,
			pointLabels: { show: true }
		},
		axes: {
			xaxis: {
				renderer: $.jqplot.CategoryAxisRenderer,
				ticks: ticksFlush
			}
		},
		highlighter: { show: false }
	}
	plot7 = $.jqplot('chartflushing', [sflush], flushingObj);

	var swater = new Array();
	i = 0;
	@for(s <- extraWaterArray) {
		swater[i] = @s;
		i++;
	}
	var ticksExtraWarer = ["0-3", "4-7", "8-11", "12-15", "16-19"];
	extraWaterObj = {
		// Only animate if we're not using excanvas (not in IE 7 or IE 8)..
		animate: !$.jqplot.use_excanvas,
		seriesDefaults:{
			renderer:$.jqplot.BarRenderer,
			pointLabels: { show: true }
		},
		axes: {
			xaxis: {
				renderer: $.jqplot.CategoryAxisRenderer,
				ticks: ticksExtraWarer
			}
		},
		highlighter: { show: false }
	}
	plot8 = $.jqplot('chartextrawater', [swater], extraWaterObj);

	var scctv = new Array();
	i = 0;
	@for(s <- cctvDefectsArray) {
		scctv[i] = @s;
		i++;
	}
	var ticksCCTV = ["0-5", "6-10", "11-15", "16-20", "21-25", "26-30", "31-35"];
	CCTVdefectsObj = {
		// Only animate if we're not using excanvas (not in IE 7 or IE 8)..
		animate: !$.jqplot.use_excanvas,
		seriesDefaults:{
			renderer:$.jqplot.BarRenderer,
			pointLabels: { show: true }
		},
		axes: {
			xaxis: {
				renderer: $.jqplot.CategoryAxisRenderer,
				ticks: ticksCCTV
			}
		},
		highlighter: { show: false }
	}
	plot9 = $.jqplot('chartCCTVdefects', [scctv], CCTVdefectsObj);

	var scctvmajor = new Array();
	i = 0;
	@for(s <- cctvMajorDefectsArray) {
		scctvmajor[i] = @s;
		i++;
	}
	var ticksCCTVmajor = ["0-5", "6-10", "11-15", "16-20", "21-25", "26-30"];
	CCTVmajordefectsObj = {
		// Only animate if we're not using excanvas (not in IE 7 or IE 8)..
		animate: !$.jqplot.use_excanvas,
		seriesDefaults:{
			renderer:$.jqplot.BarRenderer,
			pointLabels: { show: true }
		},
		axes: {
			xaxis: {
				renderer: $.jqplot.CategoryAxisRenderer,
				ticks: ticksCCTVmajor
			}
		},
		highlighter: { show: false }
	}
	plot10 = $.jqplot('chartCCTVmajordefects', [scctvmajor], CCTVmajordefectsObj);

	//
	//Popup/hide the sewers
	//		
	function deselectSewers() {
		$(".sewer-group").slideFadeToggle(function() {
			$("#info0").removeClass("selected");
		});		
	}
	
	//
	//Popup/hide the bar charts
	//	
	function deselectDiameter() {
		$(".chartsdiameter").slideFadeToggle(function() {
			$("#info1").removeClass("selected");
		});		
	}

	function deselectGroundWater() {
		$(".chartsgroundwaterarea").slideFadeToggle(function() {
			$("#info4").removeClass("selected");
		});		
	}	
	
	function deselectArea() {
		$(".chartsarea").slideFadeToggle(function() {
			$("#info2").removeClass("selected");
		});	
	}	

	function deselectRoadClassification() {
		$(".chartsroadclassification").slideFadeToggle(function() {
			$("#info5").removeClass("selected");
		});	
	}		
	
	function deselectBeach() {
		$(".chartsbeach").slideFadeToggle(function() {
			$("#info3").removeClass("selected");
		});	
	}	

	function deselectBlockage() {
		$(".chartsblockage").slideFadeToggle(function() {
			$("#info6").removeClass("selected");
		});	
	}	

	function deselectFlushing() {
		$(".chartsflushing").slideFadeToggle(function() {
			$("#info7").removeClass("selected");
		});	
	}	

	function deselectExtraWater() {
		$(".chartsextrawater").slideFadeToggle(function() {
			$("#info8").removeClass("selected");
		});	
	}		
	
	function deselectCCTVdefects() {
		$(".chartsCCTVdefects").slideFadeToggle(function() {
			$("#info9").removeClass("selected");
		});	
	}
 
	function deselectCCTVmajordefects() {
		$(".chartsCCTVmajordefects").slideFadeToggle(function() {
			$("#info10").removeClass("selected");
		});	
	} 
 
	//
	// Show/hide Sewers
	//
 	$("#info0").on('click', function() {
		if($(this).hasClass("selected")) {
			$("#info0").html('Show');
			deselectSewers();               
        } else {
			$(this).addClass("selected");
			$(".sewer-group").slideFadeToggle(function() { 
				$("#info0").focus();
				$("#info0").html('Hide');
			});
		}
		return false;
	});	
 
	//
	// Show/hide Bar Charts
	//
	$("#info1").on('click', function() {
		if($(this).hasClass("selected")) {
			$("#info1").html('Show');
			deselectDiameter();               
        } else {
            $(this).addClass("selected");
			$(".chartsdiameter").slideFadeToggle(function() { 
				$("#info1").focus();
				$("#info1").html('Hide');
			});
		}
		return false;
	});

	$("#info4").on('click', function() {
		if($(this).hasClass("selected")) {
			$("#info4").html('Show');
			deselectGroundWater();               
        } else {
            $(this).addClass("selected");
			$(".chartsgroundwaterarea").slideFadeToggle(function() { 
				$("#info4").focus();
				$("#info4").html('Hide');
			});
		}
		return false;
	});
	
	$("#info2").on('click', function() {
		if($(this).hasClass("selected")) {
			$("#info2").html('Show');
			deselectArea();               
        } else {
            $(this).addClass("selected");
			$(".chartsarea").slideFadeToggle(function() { 
				$("#info2").focus();
				$("#info2").html('Hide');
			});
		}
		return false;
	});	
	
	$("#info5").on('click', function() {
		if($(this).hasClass("selected")) {
			$("#info5").html('Show');
			deselectArea();               
        } else {
            $(this).addClass("selected");
			$(".chartsroadclassification").slideFadeToggle(function() { 
				$("#info5").focus();
				$("#info5").html('Hide');
			});
		}
		return false;
	});	
	
	$("#info3").on('click', function() {
		if($(this).hasClass("selected")) {
			$("#info3").html('Show');
			deselectBeach();               
        } else {
            $(this).addClass("selected");
			$(".chartsbeach").slideFadeToggle(function() { 
				$("#info3").focus();
				$("#info3").html('Hide');
			});
		}
		return false;
	});	

	$("#info6").on('click', function() {
		if($(this).hasClass("selected")) {
			$("#info6").html('Show');
			deselectBlockage();               
        } else {
            $(this).addClass("selected");
			$(".chartsblockage").slideFadeToggle(function() { 
				$("#info6").focus();
				$("#info6").html('Hide');
			});
		}
		return false;
	});	

	$("#info7").on('click', function() {
		if($(this).hasClass("selected")) {
			$("#info7").html('Show');
			deselectFlushing();               
        } else {
			$(this).addClass("selected");
			$(".chartsflushing").slideFadeToggle(function() { 
				$("#info7").focus();
				$("#info7").html('Hide');
			});
		}
		return false;
	});	

	$("#info8").on('click', function() {
		if($(this).hasClass("selected")) {
			$("#info8").html('Show');
			deselectExtraWater();               
        } else {
			$(this).addClass("selected");
			$(".chartsextrawater").slideFadeToggle(function() { 
				$("#info8").focus();
				$("#info8").html('Hide');
			});
		}
		return false;
	});	

	$("#info9").on('click', function() {
		if($(this).hasClass("selected")) {
			$("#info9").html('Show');
			deselectCCTVdefects();               
        } else {
			$(this).addClass("selected");
			$(".chartsCCTVdefects").slideFadeToggle(function() { 
				$("#info9").focus();
				$("#info9").html('Hide');
			});
		}
		return false;
	});	
	
	$("#info10").on('click', function() {
		if($(this).hasClass("selected")) {
			$("#info10").html('Show');
			deselectCCTVmajordefects();               
        } else {
			$(this).addClass("selected");
			$(".chartsCCTVmajordefects").slideFadeToggle(function() { 
				$("#info10").focus();
				$("#info10").html('Hide');
			});
		}
		return false;
	});	
	
	$.fn.slideFadeToggle = function(easing, callback) {
		return this.animate({ opacity: 'toggle', height: 'toggle' }, "fast", easing, callback);
	};
	
	// Hide bar charts in the beginning
	deselectDiameter();
	deselectGroundWater();
	deselectArea();
	deselectBeach();
	deselectRoadClassification();
	deselectBlockage();
	deselectFlushing();
	deselectExtraWater();
	deselectCCTVdefects();	
	deselectCCTVmajordefects();
	deselectSewers();
	//////////////////////
	
	//
	// Slider handling
	//
	$(".range-slide div.slide").each(function() {
		values = $(this).attr('value').split(',');
	    firstVal = values[0];
	    secondVal = values[1];
	    rangeSpan = $(this).parent().siblings('span.amount');
	    
		// Update colors
		var doUpdate = function(event, ui) {
			$("this .slide-back").remove();
			$($(".slide a").get().reverse()).each(function(i) {
				var bg = '#1AF230';
				if(i == 3) {
					bg = 'F84831';
				}
				$(".slide").append($('<div></div>').addClass('slide-back').width($(this).position().left - 5).css('background', bg));
			});
		};		
		
		$(this).slider({
	    	values: [firstVal , secondVal],
	    	min: parseInt($(this).attr('min')),
	    	max:  parseInt($(this).attr('max')),
	    	range: true,
	    	slide: function(event, ui) {
				$(this).parent().siblings('span.amount').html("min limit: " + ui.values[0] + " - max limit: " + ui.values[1]);
				//doUpdate();
				//ticks = [ui.values[0], ui.values[1]];
				//optionsObj = {
					// Only animate if we're not using excanvas (not in IE 7 or IE 8)..
				//	animate: !$.jqplot.use_excanvas,
				//	seriesDefaults:{
				//		renderer:$.jqplot.BarRenderer,
				//		pointLabels: { show: true }
				//	},
				//	axes: {
				//		xaxis: {
				//			renderer: $.jqplot.CategoryAxisRenderer,
				//			ticks: ticks
				//		}
				//	},
				//	highlighter: { show: false }
				//}		
				//plot1.replot(optionsObj);
				//plot1 = $.jqplot('chartdiameter', ticks, optionsObj);
				//plot1.axes = {
				//	xaxis: {
				//		renderer: $.jqplot.CategoryAxisRenderer,
				//		ticks: ticks
				//	}
				//}
	    	}
		});
		
		rangeSpan.html("min limit: " + $(this).slider("values", 0) + " - max limit: " + $(this).slider("values", 1));
		//doUpdate();
	});
	/////////////////////
});
</script>
}				